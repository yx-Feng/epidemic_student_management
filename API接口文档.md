# 疫情学生管理系统后台 API 接口文档

# **1. API接口说明**

- 接口基准地址：http://127.0.0.1:5000
- 数据返回格式统一使用JSON

### 1.1. 支持的请求方法

- GET：从服务器取出资源
- POST：在服务器创建资源
- PUT：在服务器更新资源（客户端提供修改后的完整资源）
- DELETE：从服务器删除资源

### 1.2. 返回状态说明

| 状态码 | 含义         | 说明             |
| ------ | ------------ | ---------------- |
| 200    | OK           | 请求成功         |
| 201    | CREATED      | 创建成功         |
| 204    | DELETED      | 删除成功         |
| 401    | UNAUTHORIZED | 未授权           |
| 403    | FORBIDDEN    | 被禁止访问       |
| 404    | NOT FOUND    | 请求的资源不存在 |

# 2. **登录**

### 2.1. 登录验证接口

- 请求路径：/login
- 请求方法：post
- 请求参数

| 参数名   | 数据类型 | 参数说明  | 备注                               |
| -------- | -------- | --------- | ---------------------------------- |
| id       | string   | 学号/工号 | 不能为空                           |
| pwd      | string   | 密码      | 不能为空                           |
| identity | string   | 身份      | 不能为空(0-管理员 1-学生 2-辅导员) |

- 响应参数(若无此用户、账号错误、密码错误，无返回值)

| 参数名 | 数据类型 | 参数说明 |      | 备注      |
| ------ | -------- | -------- | ---- | --------- |
| data   | json对象 | 用户数据 |      | 包含token |

- 响应数据

```json
{
  id: 'admin',
  pwd: 'admin',
  identity: '0',
  token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJhZG1pbiIsImlhdCI6MTY1MTA0MjgwMiwiZXhwIjoxNjUxMTI5MjAyfQ.Mf7FiU7xFW63ok78oTxfqKRa2dzsDV_LDn3HlL6YU3s'
}
```



# 3. **账号管理**

### 3.1. 获取用户列表

- 请求路径：/accounts

- 请求方法：get
- 请求参数

| 参数名   | 数据类型 | 参数说明     | 备注     |
| -------- | -------- | ------------ | -------- |
| query    | string   | 查询参数     | 可以为空 |
| pagenum  | string   | 当前页码     | 不能为空 |
| pagesize | string   | 每页显示条数 | 不能为空 |
| token    | string   | 用于身份验证 |          |

- 响应参数

| 参数名 | 数据类型     | 参数说明                                  |
| ------ | ------------ | ----------------------------------------- |
| data   | json对象数组 | 要获取的账号数据和数据库中的账号总数total |

- 响应数据

```json
{
    "data": [
        {
            "id": "190350207",
            "pwd": "111111",
            "identity": "1"
        },
        {
            "id": "190350208",
            "pwd": "1188888",
            "identity": "1"
        },
        {
            "id": "190350209",
            "pwd": "11111",
            "identity": "1"
        },
        {
            "id": "190350210",
            "pwd": "11111",
            "identity": "1"
        },
        {
            "id": "190350211",
            "pwd": "11111",
            "identity": "1"
        }
    ],
    "total": 18
}
```

### 3.2. 添加账号

- 请求路径：/account
- 请求方法：post
- 请求参数

| 参数名   | 数据类型 | 参数说明     | 备注                               |
| -------- | -------- | ------------ | ---------------------------------- |
| id       | string   | 学号/工号    | 不能为空                           |
| pwd      | string   | 密码         | 不能为空                           |
| identity | string   | 身份         | 不能为空(0-管理员 1-学生 2-辅导员) |
| token    | string   | 用于身份验证 |                                    |

- 响应参数(无)



### 3.3. 根据账号id获取账号信息

- 请求路径：/accounts/:id
- 请求方法：get
- 请求参数

| 参数名 | 数据类型 | 参数说明     |
| ------ | -------- | ------------ |
| id     | string   | 用户id       |
| token  | string   | 用于身份验证 |

- 响应参数

| 参数名 | 数据类型 | 参数说明  |
| ------ | -------- | --------- |
| id     | string   | 学号/工号 |
| pwd    | string   | 密码      |

- 响应数据

```javascript
{
    "data": {
        "id": "190350203",
        "pwd": "11112"
    }
}
```

### 3.4. 修改账号信息

- 请求路径：/account/:id
- 请求方法：put
- 请求参数

| 参数名 | 参数说明     |
| ------ | ------------ |
| id     | 用户id       |
| pwd    | 密码         |
| token  | 用于身份验证 |

- 响应参数(无)

### 3.5. 删除账号

- 请求路径：/account/:id
- 请求方法：delete
- 请求参数

| 参数名 | 参数说明     |
| ------ | ------------ |
| id     | 用户id       |
| token  | 用于身份验证 |

- 响应参数(无)



# 4. **个人信息管理**

### 4.1. 根据学生id获取其个人信息

- 请求路径：/pi/stu/:id
- 请求方法：get
- 请求参数

| 参数名 | 数据类型 | 参数说明     |
| ------ | -------- | ------------ |
| id     | string   | 学生学号     |
| token  | string   | 用于身份验证 |

- 响应参数

| 参数名 | 数据类型 | 参数说明     |
| ------ | -------- | ------------ |
| data   | json对象 | 学生个人信息 |

- 响应数据

```javascript
{
    "data": {
        "id": "190350208",
        "name": "空",
        "sex": "空",
        "college": "空",
        "tel": "空",
        "class": "空",
        "pwd": "11111",
        "identity": "1"
    }
}
```

### 4.2. 根据学生id更新其个人信息

- 请求路径：/pi/stu/:id
- 请求方法：put
- 请求参数

| 参数名  | 数据类型 | 参数说明     |
| ------- | -------- | ------------ |
| id      | string   | 学生学号     |
| name    | string   | 学生姓名     |
| sex     | string   | 性别         |
| class   | string   | 班级         |
| college | string   | 学院         |
| tel     | string   | 手机号码     |
| pwd     | string   | 密码         |
| token   | string   | 用于身份验证 |

- 响应参数(无)

### 4.3. 根据辅导员id获取其个人信息

- 请求路径：/pi/coun/:id
- 请求方法：get
- 请求参数

| 参数名 | 数据类型 | 参数说明     |
| ------ | -------- | ------------ |
| id     | string   | 辅导员的工号 |
| token  | string   | 用于身份验证 |

- 响应参数

| 参数名 | 数据类型 | 参数说明       |
| ------ | -------- | -------------- |
| data   | json对象 | 辅导员个人信息 |

- 响应数据

```javascript
{
    "data": {
        "id": "201500",
        "name": "吴九",
        "sex": "男",
        "college": "机械电子工程学院",
        "tel": "12313654549",
        "pwd": "11111",
        "identity": "2"
    }
}
```

### 4.4. 根据辅导员id更新其个人信息

- 请求路径：/pi/coun/:id
- 请求方法：put
- 请求参数

| 参数名  | 数据类型 | 参数说明     |
| ------- | -------- | ------------ |
| id      | string   | 辅导员工号   |
| name    | string   | 辅导员姓名   |
| sex     | string   | 性别         |
| college | string   | 学院         |
| tel     | string   | 手机号码     |
| pwd     | string   | 密码         |
| token   | string   | 用于身份验证 |

- 响应参数(无)



# 5. **假条管理**

### 5.1. 学生根据id获取自己的所有假条

- 请求路径：/lf/:id
- 请求方法：get
- 请求参数

| 参数名   | 数据类型 | 参数说明     | 备注     |
| -------- | -------- | ------------ | -------- |
| id       | string   | 学生学号     |          |
| query    | string   | 查询参数     | 可以为空 |
| pagenum  | string   | 当前页码     | 不能为空 |
| pagesize | string   | 每页显示条数 | 不能为空 |
| token    | string   | 用于身份验证 |          |

- 响应参数

| 参数名 | 数据类型     | 参数说明                                      |
| ------ | ------------ | --------------------------------------------- |
| data   | json对象数组 | 要获取的假条数据和数据库中自己假条的总数total |

- 响应数据

```javascript
{
    "data": [
        {
            "s_id": "190350208",
            "reason": "买生活用品",
            "start_time": "2021-09-05",
            "end_time": "2021-09-06",
            "place": "sss超市",
            "state": "未审批",
            "counselor_id": "201500",
            "createdTime": "2021-08-29 12:30:00",
            "sn": 2,
            "counselor_name": "吴吴"
        },
        {
            "s_id": "190350208",
            "reason": "生病",
            "start_time": "2021-08-06",
            "end_time": "2021-09-07",
            "place": "bb医院",
            "state": "未审批",
            "counselor_id": "201500",
            "createdTime": "2021-08-06 11:41:46",
            "sn": 3,
            "counselor_name": "吴吴"
        },
        {
            "s_id": "190350208",
            "reason": "参加竞赛",
            "start_time": "2021-08-25",
            "end_time": "2021-08-25",
            "place": "aa学校",
            "state": "未审批",
            "counselor_id": "201500",
            "createdTime": "2021-08-24 19:22:40",
            "sn": 4,
            "counselor_name": "吴吴"
        }
    ],
    "total": 3
}
```

### 5.2. 新建假条

- 请求路径：/lf/:id
- 请求方法：post
- 请求参数

| 参数名         | 数据类型 | 参数说明                               | 备注     |
| -------------- | -------- | -------------------------------------- | -------- |
| id             | string   | 学生学号                               |          |
| start_time     | datetime | 请假开始时间                           | 不能为空 |
| end_time       | datetime | 请假结束时间                           | 不能为空 |
| reason         | string   | 请假原因                               | 不能为空 |
| place          | string   | 去向                                   | 不能为空 |
| state          | string   | 状态(0-未审批 1-审批未通过 2-审批通过) | 默认为0  |
| counselor_name | string   | 辅导员名字                             |          |
| token          | string   | 用于身份验证                           |          |

- 响应参数(无)

### 5.3. 根据假条的序号sn获取假条信息

- 请求路径：/lf/:sn
- 请求方法：get
- 请求参数

| 参数名 | 数据类型 | 参数说明             | 备注     |
| ------ | -------- | -------------------- | -------- |
| sn     | int      | 假条在数据库中的序号 | 不能为空 |
| token  | string   | 用于身份验证         |          |

- 响应参数

| 参数名 | 数据类型 | 参数说明 |
| ------ | -------- | -------- |
| data   | json对象 | 假条数据 |

- 响应数据

```javascript
{
    "data": {
        "s_id": "190350208",
        "reason": "买生活用品",
        "start_time": "2021-09-05",
        "end_time": "2021-09-06",
        "place": "sss超市",
        "state": "未审批",
        "counselor_id": "201500",
        "createdTime": "2021-08-29 12:30:00",
        "sn": 2,
        "counselor_name": "吴吴"
    }
}
```

### 5.4. 根据假条的序号sn更新假条

- 请求路径：/lf/:sn
- 请求方法：put
- 请求参数

| 参数名         | 数据类型 | 参数说明             | 备注     |
| -------------- | -------- | -------------------- | -------- |
| sn             | int      | 假条在数据库中的序号 |          |
| createdTime    | datetime | 假条创建时间         | 不能为空 |
| start_time     | datetime | 请假开始时间         | 不能为空 |
| end_time       | datetime | 请假结束时间         | 不能为空 |
| reason         | string   | 请假原因             | 不能为空 |
| place          | string   | 去向                 | 不能为空 |
| counselor_name | string   | 辅导员名字           | 不能为空 |
| counselor_id   | string   | 辅导员工号           | 不能为空 |
| token          | string   | 用于身份验证         |          |

- 响应参数(无)

### 5.5. 根据假条的序号sn删除假条

- 请求路径：/lf/:sn
- 请求方法：delete
- 请求参数

| 参数名 | 数据类型 | 参数说明               |
| ------ | -------- | ---------------------- |
| sn     | int      | 请假表在数据库中的序号 |
| token  | string   | 用于身份验证           |

- 响应参数(无)

### 5.6. 根据辅导员id和假条的state获取假条

- 请求路径：/lf/coun/:id/:state
- 请求方法：get
- 请求参数

| 参数名   | 数据类型 | 参数说明                               | 备注     |
| -------- | -------- | -------------------------------------- | -------- |
| id       | string   | 辅导员工号                             |          |
| state    | string   | 状态(0-未审批 1-审批未通过 2-审批通过) |          |
| query    | string   | 查询参数                               | 可以为空 |
| pagesize | string   | 每页显示条数                           | 不能为空 |
| pagenum  | string   | 当前页码                               | 不能为空 |
| token    | string   | 用于身份验证                           |          |

- 响应参数

| 参数名 | 数据类型     | 参数说明                                                |
| ------ | ------------ | ------------------------------------------------------- |
| data   | json对象数组 | 要汇总的假条数据和数据库中提交对象是自己的假条总数total |

- 响应数据

```javascript
{
    "data": [
        {
            "s_id": "190350208",
            "reason": "生病",
            "start_time": "2021-08-06",
            "end_time": "2021-09-07",
            "place": "bb医院",
            "state": "0",
            "counselor_id": "201500",
            "createdTime": "2021-08-06 11:41:46",
            "sn": 3,
            "name": "萧炎",
            "tel": "15161120588"
        },
        {
            "s_id": "190350208",
            "reason": "参加竞赛",
            "start_time": "2021-08-25",
            "end_time": "2021-08-25",
            "place": "aa学校",
            "state": "0",
            "counselor_id": "201500",
            "createdTime": "2021-08-24 19:22:40",
            "sn": 4,
            "name": "萧炎",
            "tel": "15161120588"
        },
        {
            "s_id": "190350208",
            "reason": "参加竞赛",
            "start_time": "2021-05-08",
            "end_time": "2021-05-09",
            "place": "xx学校",
            "state": "0",
            "counselor_id": "201500",
            "createdTime": "2021-09-06 16:12:27",
            "sn": 6,
            "name": "萧炎",
            "tel": "15161120588"
        }
    ],
    "total": 3
}
```

### 5.7. 更新假条的state

- 请求路径：/lf/:sn/state/:isOK
- 请求方法：put
- 请求参数

| 参数名 | 数据类型 | 参数说明                               |
| ------ | -------- | -------------------------------------- |
| sn     | int      | 假条在数据库中的序号                   |
| state  | string   | 状态(0-未审批 1-审批未通过 2-审批通过) |
| isOK   | boolean  | 辅导员是否允许批假                     |
| token  | string   | 用于身份验证                           |

- 响应参数(无)

# 6. **体温表管理**

### 6.1. 根据学生id获取体温表列表

- 请求路径：/tf/stu/:id
- 请求方法：get
- 请求参数

| 参数名   | 数据类型 | 参数说明     | 备注     |
| -------- | -------- | ------------ | -------- |
| id       | string   | 学生的学号   |          |
| query    | string   | 查询参数     | 可以为空 |
| pagesize | string   | 每页显示条数 | 不能为空 |
| pagenum  | string   | 当前页码     | 不能为空 |
| token    | string   | 用于身份验证 |          |

- 响应参数

| 参数名 | 数据类型     | 参数说明                                          |
| ------ | ------------ | ------------------------------------------------- |
| data   | json对象数组 | 要获取的体温表数据和数据库中自己的体温表总数total |

- 响应数据

```json
{
    "data": [
        {
            "s_id": "190350208",
            "temperature": 38,
            "fever": "是",
            "counselor_id": "201500",
            "createdTime": "2021-09-08 22:35:52",
            "sn": 7,
            "counselor_name": "吴九"
        },
        {
            "s_id": "190350208",
            "temperature": 37.5,
            "fever": "否",
            "counselor_id": "201500",
            "createdTime": "2021-09-08 22:36:15",
            "sn": 8,
            "counselor_name": "吴九"
        },
        {
            "s_id": "190350208",
            "temperature": 37.4,
            "fever": "否",
            "counselor_id": "201500",
            "createdTime": "2021-09-08 22:36:28",
            "sn": 9,
            "counselor_name": "吴九"
        }
    ],
    "total": 4
}
```

### 6.2. 新建体温表

- 请求路径：/tf/stu/:id
- 请求方法：post
- 请求参数

| 参数名         | 数据类型 | 参数说明     | 备注                   |
| -------------- | -------- | ------------ | ---------------------- |
| id             | string   | 学生的学号   |                        |
| temperature    | float    | 体温         | 不能为空，保留一位小数 |
| fever          | string   | 是否发热     | 不能为空               |
| counselor_name | string   | 辅导员名字   | 不能为空               |
| token          | string   | 用于身份验证 |                        |

- 响应参数(无)

### 6.3. 根据体温表的序号sn获取体温表信息

- 请求路径：/tf/:sn
- 请求方法：get
- 请求参数

| 参数名 | 数据类型 | 参数说明               | 备注     |
| ------ | -------- | ---------------------- | -------- |
| sn     | int      | 体温表在数据库中的序号 | 不能为空 |
| token  | string   | 用于身份验证           |          |

- 响应参数

| 参数名 | 数据类型 | 参数说明           |
| ------ | -------- | ------------------ |
| data   | json对象 | 要获取的体温表数据 |

- 响应数据

```javascript
{
    "data": {
        "s_id": "190350208",
        "temperature": 37.5,
        "fever": "否",
        "counselor_id": "201500",
        "createdTime": "2021-09-08 22:36:15",
        "sn": 8,
        "counselor_name": "吴九"
    }
}
```

### 6.4. 更新体温表

- 请求路径：/tf/:sn
- 请求方法：put
- 请求参数

| 参数名         | 数据类型 | 参数说明               | 备注                   |
| -------------- | -------- | ---------------------- | ---------------------- |
| sn             | int      | 体温表在数据库中的序号 |                        |
| createdTime    | datetime | 体温表创建时间         | 不能为空               |
| counselor_name | string   | 辅导员名字             | 不能为空               |
| counselor_id   | string   | 辅导员工号             | 不能为空               |
| temperature    | float    | 体温                   | 不能为空，保留一位小数 |
| fever          | string   | 是否发热               | 不能为空               |
| token          | string   | 用于身份验证           |                        |

- 响应参数(无)

### 6.5. 删除体温表

- 请求路径：/tf/:sn
- 请求方法：delete
- 请求参数

| 参数名 | 数据类型 | 参数说明               |
| ------ | -------- | ---------------------- |
| sn     | int      | 体温表在数据库中的序号 |
| token  | string   | 用于身份验证           |

- 响应参数(无)

### 6.6. 根据辅导员id获取体温表列表

- 请求路径：/tf/coun/:id
- 请求方法：get
- 请求参数

| 参数名   | 数据类型 | 参数说明     | 备注     |
| -------- | -------- | ------------ | -------- |
| id       | string   | 辅导员工号   |          |
| query    | string   | 查询参数     | 可以为空 |
| select   | string   | 筛选参数     | 可以为空 |
| pagesize | string   | 每页显示条数 | 不能为空 |
| pagenum  | string   | 当前页码     | 不能为空 |
| token    | string   | 用于身份验证 |          |

- 响应参数

| 参数名 | 数据类型     | 参数说明                                                    |
| ------ | ------------ | ----------------------------------------------------------- |
| data   | json对象数组 | 要汇总的体温表数据和数据库中提交对象是自己的体温表总数total |

- 响应数据

```javascript
{
    "data": [
        {
            "s_id": "190350203",
            "temperature": 37.5,
            "fever": "否",
            "counselor_id": "201500",
            "createdTime": "2021-08-31 11:50:36",
            "sn": 7,
            "s_name": "王五"
        },
        {
            "s_id": "190350203",
            "temperature": 37.5,
            "fever": "否",
            "counselor_id": "201500",
            "createdTime": "2021-09-01 07:20:16",
            "sn": 8,
            "s_name": "王五"
        },
        {
            "s_id": "190350203",
            "temperature": 38.2,
            "fever": "是",
            "counselor_id": "201500",
            "createdTime": "2021-09-02 08:30:46",
            "sn": 9,
            "s_name": "王五"
        }
    ],
    "t": 5
}
```

